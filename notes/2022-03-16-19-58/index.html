<!doctype html><html class=notes2022-03-16-19-58 lang=en><head itemscope itemtype=http://schema.org/Blog><title>Johan Brook</title><meta charset=utf-8><meta content="width=device-width,initial-scale=1"name=viewport><link href=https://gc.zgo.at rel=preconnect><link href=https://johanbrook.goatcounter.com rel=preconnect><meta content="I'm a thirty-something designer and developer based in Sweden. I work with the best people in a company called Lookback, where I help interfaces come to life. I'm coding & designering and I like working with product, user experience, interface design, and other things too."name=description><meta content="Johan Brook"name=author><link href=/johan.css rel=stylesheet><link title="Johan Brook: Posts feed"href=/feed.xml rel=alternate type=application/rss+xml><link title="Johan Brook: Mind feed"href=/mind.xml rel=alternate type=application/rss+xml><link title="Johan Brook: Book feed"href=/reading.xml rel=alternate type=application/rss+xml><link rel="shortcut icon"href=/favicon.png type=image/png><link href=https://johan.im/notes/2022-03-16-19-58/ itemprop=url rel=canonical><link href=https://johan.im rel=author><meta property=og:title><meta content=https://johan.im/notes/2022-03-16-19-58/ property=og:url><meta content="Johan Brook"itemprop=name property=og:site_name><meta content=en_GB property=og:locale><meta content="I'm a thirty-something designer and developer based in Sweden. I work with the best people in a company called Lookback, where I help interfaces come to life. I'm coding & designering and I like working with product, user experience, interface design, and other things too."property=og:description><meta content=blog property=og:type><body><a class="visually-hidden skip-link"href=#main>Skip to content</a><div class=Content><div id=main><main role=main><article class=Post itemscope itemtype=http://schema.org/BlogPosting role=article><header><h1 class=title itemprop=name></h1><p class="mb0 fw5 mt3"><time datetime=2022-03-16T19:58:41Z itemprop=datePublished pubdate> March 16th, 2022 </time><p class="f5 mb4">About 1 min reading time</header><div class="prose drop-cap"itemprop=articleBody><p>i don’t think everyone need heavy test runners and framework for every project. a single file with <code>import assert from 'assert'</code> (node) and a bunch of assertions can suffice for a tiny prototype project.<p>if you want more structure, where do you go? the npm libraries <code>tape</code> and <code>tap</code> have ~20 dependencies each. <code>ava</code> has ~40. i don’t even want to think about <code>jest</code>…<p>i’m sure these packages are great for certain things. but here’s a minimal test runner i’ve written:<p><strong><a href=https://gist.github.com/johanbrook/598d07fa89357f8577d6d0d6e88747a5>Johan’s Test Runner →</a></strong><p>it works as you’d expect:<ol><li>create a test file.<li>import <code>test</code> and write test cases.</ol><pre class=language-ts><code class=language-ts><span class="token keyword">import</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./_test-helper'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">'assert/strict'</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'it works'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>i use node’s <code>assert</code> for assertions. want typescript support? add <code>esbuild</code> and <code>esbuild-register</code> as dev dependencies and run tests with:<pre class=language-bash><code class=language-bash>node -r esbuild-register run-tests.ts
</code></pre><p>the runner supports returning promises, as well as printing fancy file names for each test case.<p>i appreciate taking this approach before jumping to <code>npm install &LTdep></code>. it gives me very much peace of mind, as long as you don’t spend too much time maintaining your own tooling.</div></article></main><footer class=mb3 role=contentinfo><nav><ul class=mb3><li><a href=/>Home</a><li><a href=mailto:webmaster@johan.im rel=me>Email</a><li><a href=https://hachyderm.io/@brookie rel=me>Mastodon</a><li><a href=/feed.xml title=Atom>Post feed</a><li><a href=/mind.xml title=Atom>Mind feed</a><li><a href=/reading.xml title=Atom>Reading feed</a></ul></nav></footer></div><nav class=MainNav role=navigation><div class=sticky><h1 class="f4 sr-only-mobile"><a aria-label=Home href=/> <span>Johan Brook</span><span class="BackLink ml2"aria-hidden=true>←</span> </a></h1><ul class=NavCommon><li class=only-mobile><a href=/>Home</a><li><a href=/writings/>Writings</a><li><a href=/mind/>On my mind</a><li><a href=/now/>Now</a><li><a href=/reading/>Reading</a><li><a href=/about/>About me</a><li><a href=/to-read/>To read</a><li><a href=/quotes/>Quotes</a><li><a href=/changelog/>Changelog</a><li><a href=/credits/>Credits</a></ul></div></nav></div><script>if(window.location.host!==new URL('https://johan.im').host){window.goatcounter={no_onload:true}};if(window.location.hash==='#skipgc')localStorage.setItem('skipgc','t');if(localStorage.getItem('skipgc')==='t')window.goatcounter={no_onload:true}</script><script async data-goatcounter=https://johanbrook.goatcounter.com/count src=//gc.zgo.at/count.js></script>