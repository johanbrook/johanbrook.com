<!DOCTYPE html>
<html lang="en" class=" notes2022-03-16-19-58"><head itemtype="http://schema.org/Blog" itemscope="">
    <title>johan brook</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preload" as="font" type="font/ttf" href="/assets/ComicMono.ttf">
    <link rel="preload" as="font" type="font/ttf" href="/assets/ComicMono-Bold.ttf">
    <link rel="preload" as="style" type="text/css" href="https://rsms.me/inter/inter.css">

    
    <meta name="description" content="I'm a twenty-something designer and developer based in Sweden. I work with the best people in a company called Lookback, where I help interfaces come to life. I'm coding &amp; designering and I like working with product, user experience, interface design, and other things too.">
    
    
    <meta name="author" content="Johan Brook">

    <!-- Styles-->
    <link rel="stylesheet" href="/johan.css">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="Posts feed" href="/feed.xml">
    <link rel="alternate" type="application/rss+xml" title="Mind feed" href="/mind.xml">

    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <link rel="canonical" itemprop="url" href="https://johan.im/notes/2022-03-16-19-58/">
    <link rel="author" href="https://johan.im">

    <meta property="og:title" content="">
    <meta property="og:url" content="https://johan.im/notes/2022-03-16-19-58/">
    <meta property="og:site_name" itemprop="name" content="Johan Brook">
    <meta property="og:type" content="blog">
    <meta property="og:image" content="https://johan.im/assets/images/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">
    

    
  </head>

  <body>

    <div class="Content">
      
        <nav role="navigation" class="SideNav">
  <div class="SideNav__inner">
    <h1 class="f3 no-rhythm">
      <a href="/">Johan Brook</a>
    </h1>

    <div>
      <label class="SideNav__toggle btn" for="mobile-nav-trigger">
        Menu
      </label>
    </div>
  </div>

  <input type="checkbox" id="mobile-nav-trigger">

  <ul>
      <li>
        <a href="/writings/">Writings</a>
      </li>
      <li>
        <a href="/mind/">On my mind</a>
      </li>
      <li>
        <a href="/now/">Now</a>
      </li>
      <li>
        <a href="/reading/">Reading</a>
      </li>
      <li>
        <a href="/about/">About me</a>
      </li>
      <li>
        <a href="/contact/">Contact</a>
      </li>
  </ul>
</nav>

      

      <main role="main">
  <article class="Post" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">
    <header> 
      <h1 itemprop="name" class="title"></h1>

      <p class="mb0 fw5 mt3">
          <time datetime="2022-03-16T19:58:41Z" itemprop="datePublished" pubdate="">
            March 16th, 2022
          </time>
          
          
      </p>

      <p class="muted mb4">
          About 1 min reading time
      </p>
    </header>

    <div class="prose measure" itemprop="articleBody">
      
      <p>i don't think everyone need heavy test runners and framework for every project. a single file with <code>import assert from 'assert'</code> (node) and a bunch of assertions can suffice for a tiny prototype project.</p>
<p>if you want more structure, where do you go? the npm libraries <code>tape</code> and <code>tap</code> have ~20 dependencies each. <code>ava</code> has ~40. i don't even want to think about <code>jest</code>…</p>
<p>i'm sure these packages are great for certain things. but here's a minimal test runner i've written:</p>
<p><strong><a href="https://gist.github.com/johanbrook/598d07fa89357f8577d6d0d6e88747a5">Johan's Test Runner →</a></strong></p>
<p>it works as you'd expect:</p>
<ol>
<li>create a test file.</li>
<li>import <code>test</code> and write test cases.</li>
</ol>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./_test-helper"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">'assert/strict'</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'it works'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>i use node's <code>assert</code> for assertions. want typescript support? add <code>esbuild</code> and <code>esbuild-register</code> as dev dependencies and run tests with:</p>
<pre class="language-bash"><code class="language-bash">node -r esbuild-register run-tests.ts
</code></pre>
<p>the runner supports returning promises, as well as printing fancy file names for each test case.</p>
<p>i appreciate taking this approach before jumping to <code>npm install &lt;dep&gt;</code>. it gives me very much peace of mind, as long as you don't spend too much time maintaining your own tooling.</p>

    </div>

    <footer>
      

      <p class="mt3">
        <a href="/writings" class="btn">&lt;- More writings</a>
      </p>
    </footer>
  </article>
</main>

    </div>

    <footer role="contentinfo" class="mb3">
  <nav>
    <ul class="f6 list-reset mb3">
        <li><a href="/">Home</a></li>
        <li><a href="/feed.xml" title="Atom">Post feed</a></li>
        <li><a href="/mind.xml" title="Atom">Mind feed</a></li>
        <li><a href="/credits">Credits</a></li>
        <li><a href="/changelog">Changelog</a></li>
        <li><a href="/api.json">api.json</a></li>
    </ul>
  </nav>

  <p class="muted f6 tc mb0">
    Using <a class="font-mono" href="https://github.com/johanbrook/johanbrook.com/commit/8cf21f277063f1111e4d4fd3bb5bc3509b5d5707">8cf21f2</a> — built at <time>2022-05-03T19:37:53.992Z</time> — web 1.0 and 2.0 compatible.
  </p>
</footer>


    <script>
  // Only load on production environment.
  if (window.location.host !== new URL('https://johan.im').host) {
    window.goatcounter = {no_onload: true};
  }

  // Skip own views
  if (window.location.hash === '#skipgc')
    localStorage.setItem('skipgc', 't');
  if (localStorage.getItem('skipgc') === 't')
    window.goatcounter = {no_onload: true};
</script>
<script data-goatcounter="https://johanbrook.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

  


</body></html>