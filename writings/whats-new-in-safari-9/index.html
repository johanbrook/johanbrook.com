<!DOCTYPE html>
<html lang="en-gb" class=" writingswhats-new-in-safari-9"><head itemtype="http://schema.org/Blog" itemscope="">
    <title>What's new in Safari 9 / Johan</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://gc.zgo.at">
    <link rel="preconnect" href="https://johanbrook.goatcounter.com">

    <meta name="generator" content="Lume">

    
    <meta name="description" content="I'm a thirty-something designer and developer based in Sweden. I work with the best people in a company called Lookback, where I help interfaces come to life. I'm coding &amp; designering and I like working with product, user experience, interface design, and other things too.">
    
    
    <meta name="keywords" content="apple,wwdc,safari,web development">
    
    <meta name="author" content="Johan Brook">

    <!-- Styles-->
    <link rel="stylesheet" href="/johan.css">

    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" title="Johan Brook: Posts feed (Atom)" href="/writings.xml">
    <link rel="alternate" type="application/atom+xml" title="Johan Brook: Micro feed (Atom)" href="/micro.xml">
    <link rel="alternate" type="application/feed+json" title="Johan Brook: Micro feed (JSON)" href="/micro.json">
    <link rel="alternate" type="application/atom+xml" title="Johan Brook: Book feed (Atom)" href="/reading.xml">

    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <link rel="canonical" itemprop="url" href="https://johan.im/writings/whats-new-in-safari-9/">
    <link rel="author" href="https://johan.im">
    <link rel="me" href="https://hachyderm.io/@brookie">

    <meta property="og:title" content="What's new in Safari 9">
    <meta property="og:url" content="https://johan.im/writings/whats-new-in-safari-9/">
    <meta property="og:site_name" itemprop="name" content="Johan Brook">
    
    <meta property="og:locale" content="en_GB">
    
    <meta property="og:description" content="I'm a thirty-something designer and developer based in Sweden. I work with the best people in a company called Lookback, where I help interfaces come to life. I'm coding &amp; designering and I like working with product, user experience, interface design, and other things too.">
    

    

    
	<meta property="og:type" content="article">
    <meta property="article:tag" content="apple,wwdc,safari,web development">
    <meta property="article:published_time" content="2015-06-09T02:00:00+02:00">
   	
  </head>

  <body>
  	  <a href="#main" class="visually-hidden skip-link">Skip to content</a>

	  <div class="Content">

		

<nav role="navigation" class="MobileNav">
    <p class="mb0">
        <a aria-label="Home" class="MobileNav__Home plain" href="/">Johan</a> <span class="faint">/</span> <a href="/writings" class="muted">Writings</a>
    </p>
    <div class="relative">
        <details>
            <summary>Menu</summary>
            <ul role="list" class="NavList">
              		<li>
             			<a href="/micro/">Micro</a>
              		</li>
              		<li>
             			<a href="/now/">Now</a>
              		</li>
              		<li>
             			<a href="/about/">About</a>
              		</li>
              		<li>
             			<a href="/reading/">Reading</a>
              		</li>
              		<li>
             			<a href="/feeds/">Feeds</a>
              		</li>
              		<li aria-current="page">
             			<a href="/writings/">Writings</a>
              		</li>
                <li>
         			<a href="/all">All pages</a>
          		</li>
            </ul>
        </details>
    </div>
</nav>


		<div id="main">
			<main role="main">
  <article class="Post" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 itemprop="name" class="title">What's new in Safari 9</h1>

      <p class="mb0 fw5">
          <time class="text-color-contrast" datetime="2015-06-09T02:00:00+02:00" title="Tuesday, 9 June 2015 at 02:00:00 Central European Time" itemprop="datePublished" pubdate="">
            June 9, 2015
          </time>
          
          
      </p>

      <p class="f5 mb4 font-sans muted">
          About 4 min reading time
      </p>
    </header>

    <div class="prose" itemprop="articleBody">
      
      <p>I’m attending WWDC 2015, and during the web development session, Apple’s Safari team showed off
what’s new in Safari 9. It includes iOS style effects, such as backdrop filters and scroll snapping
with CSS, ES6 updates, other CSS niceties.</p>
<ul>
<li><a href="#backdrop-filters">Backdrop filters</a></li>
<li><a href="#scroll-snap-points">Scroll snap points</a></li>
<li><a href="#css-enhancements">CSS enhancements</a></li>
<li><a href="#force-touch-api">Force Touch API</a></li>
<li><a href="#javascript-updates">Javascript updates</a></li>
</ul>
<h2>Backdrop filters</h2>
<p>You know the fancy dynamic blur background effects that arrived with iOS7? Where the content “below”
a panel would be blurred with a semi transparent mask, but the actual elements in the panel would be
as original.</p>
<p>Currently, the behaviour can be emulated with various techniques. Most common would be to create a
copy of the content in the back, add a mask, blur some area, and overlay it on the original content.
This is tedious — a maintenance nightmare — even when using it for images only.</p>
<p>So for Safari 9 (OS X and iOS), Apple has added the <code>backdrop-filter</code> property. It accepts values
from the regular
<a href="http://dev.w3.org/fxtf/filters/#typedef-filter-function-list">CSS Filters specification</a>. should be
a applied to the element you would normally apply a semi transparent background too. You can combine
several filters, as you’d do with the <code>filter</code> property. This is also submitted to be a W3C
standard.</p>
<pre><code class="language-css">// Styles for a top bar
.site-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  // Will blur and saturate any content below this top bar
  // as you scroll.
  backdrop-filter: blur(10px) saturate(100%);
}
</code></pre>
<p>This even works for video and other dynamic content as you scroll! But have in mind that rendering
can be expensive, to be sure to test it before shipping.</p>
<h2>Scroll snap points</h2>
<p>When doing galleries, carousels, and such for touch devices, we’ve traditionally resorted to use
Javascript to handle the scrolling when you want control over where the scrolling should snap. Take
the Photos.app in iOS as an example: when you flip through images, they’ll snap to the edge of the
screen when the scroll momentum stops, instead of overlapping. Apple has simplified this by adding
support for scroll snapping directly in CSS (for iOS and OS X).</p>
<pre><code class="language-css">#viewport {
  // Turn it on.
  -webkit-scroll-snap-type: mandatory;
  // Set a snap point every 300px on the X axis. 
  // Use -webkit-scroll-snap-points-y for Y axis.
  -webkit-scroll-snap-points-x: repeat(300px);
}
</code></pre>
<p>By using the <code>-webkit-scroll-snap-points-x</code> and <code>-webkit-scroll-snap-points-y</code> properties, we can
set a repeating point with the <code>repeat</code> function, or use a regular value, such as:</p>
<ul>
<li>percentages and pixels</li>
<li>viewport units</li>
<li>calculated values with <code>calc()</code></li>
</ul>
<p>This is cool and all, but what if you’ve got dynamic content in this viewport? I.e. irregular sized
blocks, such as non-cropped images, where you wouldn’t hardcore a <code>repeat(300px)</code> value.</p>
<blockquote>
<p><strong>tldr;</strong> Set both destination and coordinate properties to <code>50% 50%</code> to make irregular elements
snap its center to the center point of the viewport.</p>
</blockquote>
<p>Safari solves this with the <code>-webkit-scroll-snap-destination</code> and <code>-webkit-scroll-snap-coordinate</code>
properties. These properties controls the coordinates of where Safari should position your scrolling
content in a viewport.</p>
<pre><code class="language-css">#viewport {
  -webkit-scroll-snap-type: mandatory;
  // Destination for snapping. 50% 50% denotes the center.
  // Defaults to 0 (left or top).
  -webkit-scroll-snap-destination: 50% 50%;
  // How to align the snap coordinate of an element.
  // 50% 50% denotes the center.
  -webkit-scroll-snap-coordinate: 50% 50%;
}
</code></pre>
<p>These styles are available from Javascript with:</p>
<ul>
<li><code>element.style.webkitScrollSnapType</code></li>
<li><code>element.style.webkitScrollSnapPointsY</code></li>
<li><code>element.style.webkitScrollSnapPointsX</code></li>
<li><code>element.style.webkitScrollSnapDesitation</code></li>
<li><code>element.style.webkitScrollSnapCoordinate</code></li>
</ul>
<p>Note that this may conflict with programmatic scroll, if you’re using that.</p>
<h2>CSS enhancements</h2>
<p>Safari now supports these unprefixed CSS properties:</p>
<ul>
<li>Transitions</li>
<li>Animations</li>
<li>Transforms</li>
<li>Flexbox</li>
<li>Columns</li>
<li><a href="https://developer.apple.com/library/prerelease/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9.html#//apple_ref/doc/uid/TP40014305-CH9-SW28">… and more</a></li>
</ul>
<h3>Feature detection</h3>
<p>In Safari 9, it’s possible to detect support for CSS properties and write conditional rules in a
block:</p>
<pre><code class="language-css">@supports(condition) {
  // Styles for condition
}
</code></pre>
<pre><code class="language-css">@supports(-webkit-initial-letter: 3) {
  // Use fancy initial letter styles.
}
</code></pre>
<h3>CSS4 <code>:matches</code> selector</h3>
<p>The <code>:matches</code> pseudo selector helps you mash a bunch of selectors together like this:</p>
<pre><code class="language-css">// Before

.default .foo,
.default .bar,
.default .baz {
  color: red;
}

// With :matches

.default :matches(.foo, .bar, .baz) {
  color: red;
}
</code></pre>
<p>This groups all the denoted children of <code>.default</code> together.</p>
<h2>Force Touch API</h2>
<p>Apple’s also added a Javascript API for the Force Touch technology introduced in their latest
Macbook.</p>
<p>Firstly, the <code>webkitForce</code> property is availabel on all Mouse Events. This is a number, which is the
force of the current press on the track pad.</p>
<p>There are also events on a DOM element for listening to force touch events, which behaves like
<code>mouseup</code>/<code>mousedown</code>:</p>
<ul>
<li><code>webkitmouseforcechanged</code> - any change in force.</li>
<li><code>webkitmouseforcewillbegin</code> fires just before the <code>mousedown</code> event. Ideal for preventing default
behavior.</li>
<li><code>webkitmouseforcedown</code> fires after <code>mousedown</code>, if the press is a force press.</li>
<li><code>webkitmouseforceup</code> fires after the above, if it’s a force press.</li>
</ul>
<p>The constants <code>MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN</code> and
<code>MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN</code> represents the amount of force required for a regular
and force click, respectively.</p>
<p>See
<a href="https://developer.apple.com/library/prerelease/mac/samplecode/WebKitPhotoBrowser/Listings/scripts_new_scripts_js.html#//apple_ref/doc/uid/TP40016150-scripts_new_scripts_js-DontLinkElementID_9">example app</a>
for a sample implementation.</p>
<h2>Javascript updates</h2>
<p>And lastly, we’ve got some new ES6 features:</p>
<ul>
<li>Class syntax</li>
<li>Template literals</li>
<li>Symbols</li>
<li>Computer properties</li>
<li><a href="https://developer.apple.com/library/prerelease/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9.html#//apple_ref/doc/uid/TP40014305-CH9-SW27">… and more</a></li>
</ul>
<h2>Pinned tabs icon</h2>
<p>Last but not least. Remember the Safari pinned tabs introduced at the WWDC keynote? You can use a
custom icon shown when you site is pinned:</p>
<pre><code class="language-html">&lt;link rel="icon" sizes="any" mask href="icon.svg"&gt;
</code></pre>
<p>The SVG icon should,
<a href="https://developer.apple.com/library/prerelease/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9.html#//apple_ref/doc/uid/TP40014305-CH9-SW20">according to Apple</a>,
have 100% black shapes and transparent background.</p>
<p>You can however set the color of the icon with:</p>
<pre><code class="language-html">&lt;meta name="theme-color" content="red"&gt;
</code></pre>
<hr>
<p>I really like the snap and backdrop CSS support. I’ve missed the former for a while, but didn’t see
the latter coming. Hope they land in Chrome and the others soon.</p>
<p><a href="https://developer.apple.com/library/prerelease/mac/releasenotes/General/WhatsNewInSafari/Introduction/Introduction.html#//apple_ref/doc/uid/TP40014305-CH1-SW1">Complete release notes and links to sample code</a>.</p>

    </div>
  </article>
</main>

		</div>

   		<nav role="navigation" class="MainNav">
	<div class="sticky">
		<h1 class="f4 font-sans">
			<a href="/" aria-label="Home">
				<span>Johan</span><span aria-hidden="true" class="BackLink ml2">←</span>
			</a>
		</h1>

		<ul role="list" class="NavList">
          		<li>
         			<a href="/micro/">Micro</a>
          		</li>
          		<li>
         			<a href="/now/">Now</a>
          		</li>
          		<li>
         			<a href="/about/">About</a>
          		</li>
          		<li>
         			<a href="/reading/">Reading</a>
          		</li>
          		<li>
         			<a href="/feeds/">Feeds</a>
          		</li>
          		<li aria-current="page">
         			<a href="/writings/">Writings</a>
          		</li>
            <li>
     			<a href="/all">All pages</a>
      		</li>
        </ul>
	</div>
</nav>

	  </div>

      <script>
  // Only load on production environment.
  if (window.location.host !== new URL('https://johan.im').host) {
    window.goatcounter = {no_onload: true};
  }

  // Skip own views
  if (window.location.hash === '#skipgc')
    localStorage.setItem('skipgc', 't');
  if (localStorage.getItem('skipgc') === 't')
    window.goatcounter = {no_onload: true};
</script>
<script data-goatcounter="https://johanbrook.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

  


</body></html>