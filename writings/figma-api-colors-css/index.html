<!DOCTYPE html>
<html lang="en-gb" class=" writingsfigma-api-colors-css"><head itemtype="http://schema.org/Blog" itemscope="">
    <title>Using Figma's API to sync colours with your CSS / Johan</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://gc.zgo.at">
    <link rel="preconnect" href="https://johanbrook.goatcounter.com">

    <meta name="generator" content="Lume">

    
    <meta name="description" content="How I used Figma's web API to sync colours with a CSS codebase, to close the gap between design resource and the implementation.">
    
    
    <meta name="keywords" content="figma,api,tailwind,css,colors">
    
    <meta name="author" content="Johan Brook">

    <!-- Styles-->
    <link rel="stylesheet" href="/johan.css">

    <!-- Feeds -->
    <link rel="alternate" type="application/rss+xml" title="Johan Brook: Posts feed (RSS)" href="/writings.xml">
    <link rel="alternate" type="application/feed+json" title="Johan Brook: Posts feed (JSON)" href="/writings.json">
    <link rel="alternate" type="application/rss+xml" title="Johan Brook: Micro feed (RSS)" href="/micro.xml">
    <link rel="alternate" type="application/feed+json" title="Johan Brook: Micro feed (JSON)" href="/micro.json">
    <link rel="alternate" type="application/rss+xml" title="Johan Brook: Book feed (RSS)" href="/reading.xml">
    <link rel="alternate" type="application/feed+json" title="Johan Brook: Book feed (JSON)" href="/reading.json">
    <link rel="alternate" type="application/rss+xml" title="Johan Brook: Recipes feed (RSS)" href="/recipes.xml">
    <link rel="alternate" type="application/feed+json" title="Johan Brook: Recipes feed (JSON)" href="/recipes.json">

    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <link rel="canonical" itemprop="url" href="https://johan.im/writings/figma-api-colors-css/">
    <link rel="author" href="https://johan.im">
    <link rel="me" href="https://hachyderm.io/@brookie">

    <meta property="og:title" content="Using Figma's API to sync colours with your CSS">
    <meta property="og:url" content="https://johan.im/writings/figma-api-colors-css/">
    <meta property="og:site_name" itemprop="name" content="Johan Brook">
    
    <meta property="og:locale" content="en_GB">
    
    <meta property="og:description" content="How I used Figma's web API to sync colours with a CSS codebase, to close the gap between design resource and the implementation.">
    

    

    
	<meta property="og:type" content="article">
    <meta property="article:tag" content="figma,api,tailwind,css,colors">
    <meta property="article:published_time" content="2019-03-30T01:00:00+01:00">
   	
  </head>

  <body>
  	  <a href="#main" class="visually-hidden skip-link">Skip to content</a>

	  <div class="Content">

		

<nav role="navigation" class="MobileNav">
    <p class="mb0">
        <a aria-label="Home" class="MobileNav__Home plain" href="/">Johan</a> <span class="faint">/</span> <a href="/writings" class="muted">Writings</a>
    </p>
    <div class="relative">
        <details>
            <summary>Menu</summary>
            <ul role="list" class="NavList">
              		<li>
             			<a href="/micro/">Micro</a>
              		</li>
              		<li>
             			<a href="/now/">Now</a>
              		</li>
              		<li>
             			<a href="/reading/">Reading</a>
              		</li>
              		<li>
             			<a href="/about/">About</a>
              		</li>
              		<li aria-current="page">
             			<a href="/writings/">Writings</a>
              		</li>
              		<li>
             			<a href="/recipes/">Recipes</a>
              		</li>
              		<li>
             			<a href="/feeds/">Feeds</a>
              		</li>
                <li>
         			<a href="/all">All pages</a>
          		</li>
            </ul>
        </details>
    </div>
</nav>


		<div id="main">
			<main role="main">
  <article class="Post" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 itemprop="name" class="title">Using Figma's API to sync colours with your CSS</h1>

      <p class="mb0 fw5">
          <time class="text-color-contrast" datetime="2019-03-30T01:00:00+01:00" title="Saturday, 30 March 2019 at 01:00:00 Central European Time" itemprop="datePublished" pubdate="">
            March 30, 2019
          </time>
          
          
      </p>

      <p class="f5 mb4 font-sans muted">
          About 4 min reading time
      </p>
    </header>

    <div class="prose" itemprop="articleBody">
      
      <p><strong>Design systems</strong> have become popular recently. Even if you don‚Äôt need a full blown one, it might
be nice to collect design resources in a single, canonical location. In this post, I‚Äôll describe how
I worked with Figma and their API to sync colours with a CSS codebase.</p>
<h2>The problem</h2>
<p>At Lookback, we had all visual design collected across Sketch files. Sketch is nice, but as our
platform grew with more apps, interfaces, and flows, it was clear that the workflow of ‚Äúa single
designer owning all files‚Äù just didn‚Äôt hold up:</p>
<ul>
<li>It would be a constant stream of new Sketch files or PNG exports being shared in the Trello cards.</li>
<li>For each small change, the designer had to go back to the Sketch file, do a minor change, export
again, upload for review.</li>
<li>There was emphasis on collaboration. Merging in feedback from another person‚Äôs work in Sketch was
a pain.</li>
<li>Managing colours and other styles <em>across</em> Sketch files was a pain.</li>
</ul>
<p><strong>Enter Figma.</strong></p>
<p><a href="https://www.figma.com">Figma</a> is a design software capable of everything Sketch can do, but with a
few important details:</p>
<ul>
<li>It‚Äôs web based. Accessible everywhere with an option to install locally as an macOS app.</li>
<li>It‚Äôs completely cloud based. No local files to sync. No merging and branching. It‚Äôs saved as you
go.</li>
<li>It supports shared libraries of components and styles.</li>
<li>It supports simple prototyping right out of the box.</li>
<li>It‚Äôs <strong>collaborative</strong>. You can design in high or low fidelity with coworkers in <em>real time</em> üòç</li>
</ul>
<p>I can‚Äôt stress the last point enough. This has severely improved our design flow. It‚Äôs more
democratic and transparent, as anybody with a Figma account can pop into a design and poke around.
Figma has completely eliminated the old ways of doing design flows.</p>
<p><strong>A month in, I think Figma is a killer app for doing interface design at the moment.</strong></p>
<h2>Back to the problem</h2>
<p>I set out on trying out Figma in our organisation for a while. The first task was to structure out
colour system, which at the time was very loosely defined and pretty ad-hoc.</p>
<p>Describing how I created the colour system is out of scope for this post. The end result should
anyway be</p>
<ul>
<li>a grid of colours named after hue and brightness,</li>
<li>the same colours collected in Figma‚Äôs colour library</li>
</ul>
<figure class="image--full">
  <img src="/assets/posts/color-system.png" alt="Color system">
</figure>
<p><em>How do I use these colours in my web frontend?</em></p>
<p>The Old Way would be to manually copy the HEX codes over to (S)CSS variables and make sure to keep
them up to date. Now, the colours might not change that frequently, so this might not be a huge
pain. But when you‚Äôre in the exploratory phase, it‚Äôs very messy to go back and forth all the time.</p>
<p>I noticed Figma has an <a href="https://www.figma.com/developers">API</a> ‚ú®Rejoice! The
<a href="https://www.figma.com/developers/docs">docs</a> are lovely, and the only thing needed to do simple
HTTP REST calls is an access token you generate for yourself.</p>
<p>My goal was to:</p>
<ul>
<li>Sync the <strong>names</strong> and <strong>HEX colour codes</strong> from my Figma file down into a JSON or JS file.</li>
<li>This file was to be used in the build process for my CSS, so variables could be created.</li>
</ul>
<p>After playing around, I ended up with a Node script which fetches the colour styles for a team and
writes them to a <code>colors.js</code> file. It‚Äôs a super simple script which just calls their endpoints and
pieces together all the styles into a big hash.</p>
<p class="tc">
  <a class="btn" href="https://gist.github.com/brookback/cce828202ef40ddddf2d1aa731929c90">fetch-figma-colors.js</a>
</p>
<p>‚ö†Ô∏è <em>You have to tweak some variables in there!</em></p>
<p>It was a bit fiddly to get the actual HEX codes of the styles, since Figma doesn‚Äôt include them in
the call to the <code>/styles</code> API endpoint. Therefore, I had to cross reference the name of the styles
with the colour samples in the document. I‚Äôve sent this feedback to the Figma team.</p>
<p>Run it like this:</p>
<pre><code class="language-bash">FIGMA_PERSONAL_TOKEN=&lt;your-token&gt; node fetch-figma-colors.js
</code></pre>
<p>The resulting file, <code>colors.js</code>, will look like this:</p>
<pre><code class="language-js">/* eslint-disable */
/* Updated at Thu, 21 Mar 2019 21:06:58 GMT*/
module.exports = {
    /** Suitable as background color. */
    'blue-10': '#f6fbfd',
    /** Suitable as default border color. */
    'blue-20': '#d7f3ff',
    'blue-30': '#a4e3ff',
    'blue-40': '#60ceff',
    'blue-50': '#00a0e8',
    /** Suitable as default button and link color. */
    'blue-60': '#007db5',
    /** Suitable as heading color. */
    'blue-70': '#006693',
    /** Suitable as body text color. */
    'blue-80': '#004260',
    'blue-90': '#002b3e',
    'blue-100': '#041820',
    // ...
};
</code></pre>
<p>Neat! Even with custom comments I wrote for some styles in Figma! üòç</p>
<figure>
  <img src="/assets/posts/figma-styles.png" style="width: 231px" alt="Figma styles">
</figure>
<p><em>Note:</em> You can of course make it be a JSON file instead if that‚Äôs your thing, but I wanted to keep
the comments from Figma as JS comments, as JSON doesn‚Äôt support that.</p>
<h2>Using the styles in my CSS</h2>
<p>This is were things differ for people. Some use Sass, others use LESS or PostCSS, or just <em>nothing
at all</em>.</p>
<p><strong>You have to figure out how to get this hash of colours into your styles somehow.</strong></p>
<p>For me, I‚Äôm in the midst of moving over our CSS foundation from Sass to a PostCSS pipeline, using
<a href="https://tailwindcss.com">Tailwind</a>.</p>
<p>Tailwind is sort of like a <em>generator for design systems</em>. It‚Äôs similar to the
<a href="https://tachyons.io">Tachyons toolkit</a>, but goes even further, with more things automated.</p>
<p>Both Tailwind and Tachyons are proponents of something called <em>functional CSS</em>. This is out of scope
of this post, but I recommend reading these articles:</p>
<ul>
<li><a href="http://mrmrs.cc/writing/2016/03/24/scalable-css/">CSS and scalability</a></li>
<li><a href="https://jon.gold/2015/07/functional-css/">Functional CSS</a></li>
</ul>
<p>Tailwind is nice since I can configure widths, margins, colours‚Äâ‚Äî‚Äâeverything‚Äâ‚Äî‚Äâin a Javascript
config file, and then generate a CSS foundation from that.</p>
<p>See more in the <a href="https://tailwindcss.com/docs/configuration">documentation</a>, but in a nutshell it
looks like this:</p>
<pre><code class="language-js">// tailwind.config.js

module.exports = {
    theme: {
        colors: {
            white: '#fff',
            // ...
        },
    },
};
</code></pre>
<p>Tailwind uses this colour scale to create border, text, and background colours as class names. I can
now use it like this in my HTML <em>or</em> CSS code:</p>
<pre><code class="language-html">&lt;!-- HTML --&gt;

&lt;div class="bg-white"&gt;
  &lt;p&gt;Hello!&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>or</p>
<pre><code class="language-css">/* CSS */

div {
  @apply bg-white;
}

/* or: */

div {
  background-color: theme('colors.white');
}
</code></pre>
<p>The final thing to do is thus to import our colours into the config, et vo√≠la:</p>
<pre><code class="language-js">// tailwind.config.js
const colors = require('./colors');

module.exports = {
    theme: {
        colors,
    },
};
</code></pre>
<pre><code class="language-html">&lt;div class="bg-blue-10"&gt;
  &lt;h1 class="text-orange-60"&gt;Orange 60&lt;/h1&gt;
&lt;/div&gt;
</code></pre>
<p>Done! üåà</p>
<h2>Recap</h2>
<ol>
<li>We create colour styles in Figma, according to the art on how to create colour systems.</li>
<li>We update our CSS codebase with the colour styles‚Äô names and HEX codes.</li>
<li>Those are imported into our Tailwind config and the CSS is built based on the colours.</li>
<li>We have the colours available as config variables in our CSS code or as classes in our HTML ‚ú®</li>
</ol>
<p>Anytime you‚Äôd like to adjust the colours in your system, be sure to run the script in the CSS
codebase and distribute a new version of the generated CSS file.</p>
<p>Future work could include specifying whole component styles in Figma and parsing that into
corresponding CSS rules ‚úåÔ∏è</p>

    </div>
  </article>
</main>

		</div>

   		<nav role="navigation" class="MainNav">
	<div class="sticky">
		<h1 class="f4 font-sans">
			<a href="/" aria-label="Home">
				<span>Johan</span><span aria-hidden="true" class="BackLink ml2">‚Üê</span>
			</a>
		</h1>

		<ul role="list" class="NavList">
          		<li>
         			<a href="/micro/">Micro</a>
          		</li>
          		<li>
         			<a href="/now/">Now</a>
          		</li>
          		<li>
         			<a href="/reading/">Reading</a>
          		</li>
          		<li>
         			<a href="/about/">About</a>
          		</li>
          		<li aria-current="page">
         			<a href="/writings/">Writings</a>
          		</li>
          		<li>
         			<a href="/recipes/">Recipes</a>
          		</li>
          		<li>
         			<a href="/feeds/">Feeds</a>
          		</li>
            <li>
     			<a href="/all">All pages</a>
      		</li>
        </ul>
	</div>
</nav>

	  </div>

      <script>
  // Only load on production environment.
  if (window.location.host !== new URL('https://johan.im').host) {
    window.goatcounter = {no_onload: true};
  }

  // Skip own views
  if (window.location.hash === '#skipgc')
    localStorage.setItem('skipgc', 't');
  if (localStorage.getItem('skipgc') === 't')
    window.goatcounter = {no_onload: true};
</script>
<script data-goatcounter="https://johanbrook.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

  


</body></html>