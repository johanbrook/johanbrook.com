<!doctype html><html class=writingsfigma-api-colors-css lang=en><head itemscope itemtype=http://schema.org/Blog><title>Using Figma's API to sync colours with your CSS / Johan Brook</title><meta charset=utf-8><meta content="width=device-width,initial-scale=1"name=viewport><link href=https://gc.zgo.at rel=preconnect><link href=https://johanbrook.goatcounter.com rel=preconnect><meta content="How I used Figma's web API to sync colours with a CSS codebase, to close the gap between design resource and the implementation."name=description><meta content=figma,api,tailwind,css,colors name=keywords><meta content="Johan Brook"name=author><link href=/johan.css rel=stylesheet><link title="Johan Brook: Posts feed"href=/feed.xml rel=alternate type=application/rss+xml><link title="Johan Brook: Mind feed"href=/mind.xml rel=alternate type=application/rss+xml><link title="Johan Brook: Book feed"href=/reading.xml rel=alternate type=application/rss+xml><link rel="shortcut icon"href=/favicon.png type=image/png><link href=https://johan.im/writings/figma-api-colors-css/ itemprop=url rel=canonical><link href=https://johan.im rel=author><meta content="Using Figma's API to sync colours with your CSS"property=og:title><meta content=https://johan.im/writings/figma-api-colors-css/ property=og:url><meta content="Johan Brook"itemprop=name property=og:site_name><meta content=en_GB property=og:locale><meta content="How I used Figma's web API to sync colours with a CSS codebase, to close the gap between design resource and the implementation."property=og:description><meta content=article property=og:type><meta content=figma,api,tailwind,css,colors property=article:tag><meta content=2019-03-30T00:00:00Z property=article:published_time><body><a class="visually-hidden skip-link"href=#main>Skip to content</a><div class=Content><div id=main><main role=main><article class=Post itemscope itemtype=http://schema.org/BlogPosting role=article><header><h1 class=title itemprop=name>Using Figma's API to sync colours with your CSS</h1><p class="mb0 fw5 mt3"><time datetime=2019-03-30T00:00:00Z itemprop=datePublished pubdate> March 30th, 2019 </time><p class="f5 mb4">About 4 min reading time</header><div class="prose drop-cap"itemprop=articleBody><p><strong>Design systems</strong> have become popular recently. Even if you don‚Äôt need a full blown one, it might be nice to collect design resources in a single, canonical location. In this post, I‚Äôll describe how I worked with Figma and their API to sync colours with a CSS codebase.<h2>The problem</h2><p>At Lookback, we had all visual design collected across Sketch files. Sketch is nice, but as our platform grew with more apps, interfaces, and flows, it was clear that the workflow of ‚Äúa single designer owning all files‚Äù just didn‚Äôt hold up:<ul><li>It would be a constant stream of new Sketch files or PNG exports being shared in the Trello cards.<li>For each small change, the designer had to go back to the Sketch file, do a minor change, export again, upload for review.<li>There was emphasis on collaboration. Merging in feedback from another person‚Äôs work in Sketch was a pain.<li>Managing colours and other styles <em>across</em> Sketch files was a pain.</ul><p><strong>Enter Figma.</strong><p><a href=https://www.figma.com>Figma</a> is a design software capable of everything Sketch can do, but with a few important details:<ul><li>It‚Äôs web based. Accessible everywhere with an option to install locally as an macOS app.<li>It‚Äôs completely cloud based. No local files to sync. No merging and branching. It‚Äôs saved as you go.<li>It supports shared libraries of components and styles.<li>It supports simple prototyping right out of the box.<li>It‚Äôs <strong>collaborative</strong>. You can design in high or low fidelity with coworkers in <em>real time</em> üòç</ul><p>I can‚Äôt stress the last point enough. This has severely improved our design flow. It‚Äôs more democratic and transparent, as anybody with a Figma account can pop into a design and poke around. Figma has completely eliminated the old ways of doing design flows.<p><strong>A month in, I think Figma is a killer app for doing interface design at the moment.</strong><h2>Back to the problem</h2><p>I set out on trying out Figma in our organisation for a while. The first task was to structure out colour system, which at the time was very loosely defined and pretty ad-hoc.<p>Describing how I created the colour system is out of scope for this post. The end result should anyway be<ul><li>a grid of colours named after hue and brightness,<li>the same colours collected in Figma‚Äôs colour library</ul><figure class=image--full><img alt="Color system"src=/assets/posts/color-system.png></figure><p><em>How do I use these colours in my web frontend?</em><p>The Old Way would be to manually copy the HEX codes over to (S)CSS variables and make sure to keep them up to date. Now, the colours might not change that frequently, so this might not be a huge pain. But when you‚Äôre in the exploratory phase, it‚Äôs very messy to go back and forth all the time.<p>I noticed Figma has an <a href=https://www.figma.com/developers>API</a> ‚ú®Rejoice! The <a href=https://www.figma.com/developers/docs>docs</a> are lovely, and the only thing needed to do simple HTTP REST calls is an access token you generate for yourself.<p>My goal was to:<ul><li>Sync the <strong>names</strong> and <strong>HEX colour codes</strong> from my Figma file down into a JSON or JS file.<li>This file was to be used in the build process for my CSS, so variables could be created.</ul><p>After playing around, I ended up with a Node script which fetches the colour styles for a team and writes them to a <code>colors.js</code> file. It‚Äôs a super simple script which just calls their endpoints and pieces together all the styles into a big hash.<p class=tc><a class=btn href=https://gist.github.com/brookback/cce828202ef40ddddf2d1aa731929c90>fetch-figma-colors.js</a><p>‚ö†Ô∏è <em>You have to tweak some variables in there!</em><p>It was a bit fiddly to get the actual HEX codes of the styles, since Figma doesn‚Äôt include them in the call to the <code>/styles</code> API endpoint. Therefore, I had to cross reference the name of the styles with the colour samples in the document. I‚Äôve sent this feedback to the Figma team.<p>Run it like this:<pre class=language-bash><code class=language-bash>FIGMA_PERSONAL_TOKEN=<your-token> node fetch-figma-colors.js
</your-token></code></pre><p>The resulting file, <code>colors.js</code>, will look like this:<pre class=language-js><code class=language-js><span class="token comment">/* eslint-disable */</span>
<span class="token comment">/* Updated at Thu, 21 Mar 2019 21:06:58 GMT*/</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">/** Suitable as background color. */</span>
	<span class="token string-property property">'blue-10'</span><span class="token operator">:</span> <span class="token string">'#f6fbfd'</span><span class="token punctuation">,</span>
	<span class="token comment">/** Suitable as default border color. */</span>
	<span class="token string-property property">'blue-20'</span><span class="token operator">:</span> <span class="token string">'#d7f3ff'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'blue-30'</span><span class="token operator">:</span> <span class="token string">'#a4e3ff'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'blue-40'</span><span class="token operator">:</span> <span class="token string">'#60ceff'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'blue-50'</span><span class="token operator">:</span> <span class="token string">'#00a0e8'</span><span class="token punctuation">,</span>
	<span class="token comment">/** Suitable as default button and link color. */</span>
	<span class="token string-property property">'blue-60'</span><span class="token operator">:</span> <span class="token string">'#007db5'</span><span class="token punctuation">,</span>
	<span class="token comment">/** Suitable as heading color. */</span>
	<span class="token string-property property">'blue-70'</span><span class="token operator">:</span> <span class="token string">'#006693'</span><span class="token punctuation">,</span>
	<span class="token comment">/** Suitable as body text color. */</span>
	<span class="token string-property property">'blue-80'</span><span class="token operator">:</span> <span class="token string">'#004260'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'blue-90'</span><span class="token operator">:</span> <span class="token string">'#002b3e'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'blue-100'</span><span class="token operator">:</span> <span class="token string">'#041820'</span><span class="token punctuation">,</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Neat! Even with custom comments I wrote for some styles in Figma! üòç<figure><img alt="Figma styles"src=/assets/posts/figma-styles.png style=width:231px></figure><p><em>Note:</em> You can of course make it be a JSON file instead if that‚Äôs your thing, but I wanted to keep the comments from Figma as JS comments, as JSON doesn‚Äôt support that.<h2>Using the styles in my CSS</h2><p>This is were things differ for people. Some use Sass, others use LESS or PostCSS, or just <em>nothing at all</em>.<p><strong>You have to figure out how to get this hash of colours into your styles somehow.</strong><p>For me, I‚Äôm in the midst of moving over our CSS foundation from Sass to a PostCSS pipeline, using <a href=https://tailwindcss.com>Tailwind</a>.<p>Tailwind is sort of like a <em>generator for design systems</em>. It‚Äôs similar to the <a href=https://tachyons.io>Tachyons toolkit</a>, but goes even further, with more things automated.<p>Both Tailwind and Tachyons are proponents of something called <em>functional CSS</em>. This is out of scope of this post, but I recommend reading these articles:<ul><li><a href=http://mrmrs.cc/writing/2016/03/24/scalable-css/>CSS and scalability</a><li><a href=https://jon.gold/2015/07/functional-css/>Functional CSS</a></ul><p>Tailwind is nice since I can configure widths, margins, colours‚Äâ‚Äî‚Äâeverything‚Äâ‚Äî‚Äâin a Javascript config file, and then generate a CSS foundation from that.<p>See more in the <a href=https://tailwindcss.com/docs/configuration>documentation</a>, but in a nutshell it looks like this:<pre class=language-js><code class=language-js><span class="token comment">// tailwind.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">white</span><span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
			<span class="token comment">// ...</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Tailwind uses this colour scale to create border, text, and background colours as class names. I can now use it like this in my HTML <em>or</em> CSS code:<pre class=language-html><code class=language-html><span class="token comment">&LT!-- HTML --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation"><</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bg-white<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation"><</span>p</span><span class="token punctuation">></span></span>Hello!<span class="token tag"><span class="token tag"><span class="token punctuation">&LT/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&LT/</span>div</span><span class="token punctuation">></span></span>
</code></pre><p>or<pre class=language-css><code class=language-css><span class="token comment">/* CSS */</span>

<span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@apply</span> bg-white<span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>

<span class="token comment">/* or: */</span>

<span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">theme</span><span class="token punctuation">(</span><span class="token string">'colors.white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>The final thing to do is thus to import our colours into the config, et vo√≠la:<pre class=language-js><code class=language-js><span class="token comment">// tailwind.config.js</span>
<span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./colors'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		colors<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation"><</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bg-blue-10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation"><</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-orange-60<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Orange 60<span class="token tag"><span class="token tag"><span class="token punctuation">&LT/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&LT/</span>div</span><span class="token punctuation">></span></span>
</code></pre><p>Done! üåà<h2>Recap</h2><ol><li>We create colour styles in Figma, according to the art on how to create colour systems.<li>We update our CSS codebase with the colour styles‚Äô names and HEX codes.<li>Those are imported into our Tailwind config and the CSS is built based on the colours.<li>We have the colours available as config variables in our CSS code or as classes in our HTML ‚ú®</ol><p>Anytime you‚Äôd like to adjust the colours in your system, be sure to run the script in the CSS codebase and distribute a new version of the generated CSS file.<p>Future work could include specifying whole component styles in Figma and parsing that into corresponding CSS rules ‚úåÔ∏è</div></article></main><footer class=mb3 role=contentinfo><nav><ul class=mb3><li><a href=/>Home</a><li><a href=mailto:webmaster@johan.im rel=me>Email</a><li><a href=https://hachyderm.io/@brookie rel=me>Mastodon</a><li><a href=/feed.xml title=Atom>Post feed</a><li><a href=/mind.xml title=Atom>Mind feed</a><li><a href=/reading.xml title=Atom>Reading feed</a></ul></nav></footer></div><nav class=MainNav role=navigation><div class=sticky><h1 class="f4 sr-only-mobile"><a aria-label=Home href=/> <span>Johan Brook</span><span class="BackLink ml2"aria-hidden=true>‚Üê</span> </a></h1><ul class=NavCommon><li class=only-mobile><a href=/>Home</a><li><a href=/writings/>Writings</a><li><a href=/mind/>On my mind</a><li><a href=/now/>Now</a><li><a href=/reading/>Reading</a><li><a href=/to-read/>To read</a><li><a href=/about/>About me</a><li><a href=/quotes/>Quotes</a><li><a href=/changelog/>Changelog</a><li><a href=/credits/>Credits</a></ul></div></nav></div><script>if(window.location.host!==new URL('https://johan.im').host){window.goatcounter={no_onload:true}};if(window.location.hash==='#skipgc')localStorage.setItem('skipgc','t');if(localStorage.getItem('skipgc')==='t')window.goatcounter={no_onload:true}</script><script async data-goatcounter=https://johanbrook.goatcounter.com/count src=//gc.zgo.at/count.js></script>